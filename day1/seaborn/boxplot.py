import seaborn as sns
import koreanize_matplotlib # 한글 폰트 설정을 위한 라이브러리입니다. matplotlib에서 한글이 깨지는 문제를 해결해줍니다.
import matplotlib.pyplot as plt

# `boxplot`은 데이터의 평균뿐만 아니라 **중앙값, 사분위수, 그리고 이상치(Outlier)**를 한눈에 
# 보여주기 때문에 데이터의 분포를 비교할 때 가장 많이 사용되는 도구입니다.
#
# `tips` 데이터셋을 활용한 `boxplot()` 예제 
#
# 아래코드는 요일별로 손님들이 낸 **총 결제 금액(`total_bill`)**의 분포를 비교합니다.
#
# 2. `boxplot` 읽는 법
# 박스 플롯은 하나의 상자에 5가지 핵심 수치를 담고 있습니다.
#
# **중앙값 (Median):** 박스 내부의 **가운데 선**. 데이터의 딱 중간에 위치한 값입니다.
# **박스의 윗변과 밑변 (Q3, Q1):** 각각 상위 **25%()**와 하위 **25%()** 지점입니다. 
#   박스의 길이는 전체 데이터의 중간 50%가 모여 있는 구간(IQR)을 의미합니다.
# **수염 (Whiskers):** 박스 위아래로 뻗은 선. 보통  범위 내의 최댓값과 최솟값을 나타냅니다.
# **점 (Outliers):** 수염 범위를 벗어난 **이상치**입니다. 
# 평소보다 유독 많이 결제한 '통 큰 손님'들을 의미합니다.
#
# 3. 코드 상세 설명 및 분석 인사이트
#
# **요일별 비교 (`x="day"`)**: 주말(Sat, Sun)로 갈수록 박스의 위치가 위로 올라가고 
# 박스의 길이기 길어집니다. 이는 주말에 손님들이 더 많은 돈을 쓰고, 지출 금액의 변동폭도 
# 크다는 것을 보여줍니다.
# **시간대별 비교 (`hue="time"`)**: 같은 요일 안에서도 점심보다는 저녁(Dinner) 시간대에 
# 결제 금액이 높은 경향이 있음을 색상 구분을 통해 확인할 수 있습니다.
# **이상치 발견**: 그래프 상단에 툭 튀어나온 점들을 통해, 특정 요일에 평균보다 훨씬 높은 
# 결제를 한 사례가 얼마나 빈번한지 파악할 수 있습니다.
# 이러한 이상치 분석은 마케팅 전략 수립에 유용한 인사이트를 제공합니다.
# 예를 들어, 특정 요일이나 시간대에 프로모션을 집중시켜 매출을 극대화할 수 있습니다.
# 박스 플롯은 단순한 평균 비교를 넘어, 데이터의 분포와 특성을 깊이 이해하는 데
# 강력한 도구임을 알 수 있습니다.

# 1. 데이터 로드
tips = sns.load_dataset("tips")

# 2. boxplot 시각화
plt.figure(figsize=(10, 6))
sns.boxplot(
    data=tips, 
    x="day",            # X축: 요일 (범주)
    y="total_bill",     # Y축: 총 결제 금액 (수치)
    hue="time",         # 색상: 점심(Lunch) vs 저녁(Dinner) 구분
    palette="Set2",     # 색상 팔레트
    order=["Thur", "Fri", "Sat", "Sun"] # 요일 순서 고정
)

# 3. 그래프 꾸미기
plt.title("요일 및 시간대별 결제 금액 분포 (Box Plot)")
plt.xlabel("요일 (Day)")
plt.ylabel("총 결제 금액 ($)")
plt.show()