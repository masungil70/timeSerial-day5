import seaborn as sns
import koreanize_matplotlib # 한글 폰트 설정을 위한 라이브러리입니다. matplotlib에서 한글이 깨지는 문제를 해결해줍니다.
import matplotlib.pyplot as plt

# `pairplot()`은 데이터셋에 포함된 모든 수치형 변수들 간의 관계를 한꺼번에 시각화해주는 매우 
# 강력한 도구입니다. 데이터의 전체적인 분포와 변수 사이의 상관관계를 탐색할 때 가장 먼저 
# 사용하는 '종합 선물 세트' 같은 그래프입니다.
#
# `tips` 데이터셋을 활용하여 수치형 변수들(총 결제액, 팁, 인원수)이 서로 어떤 
# 관계를 맺고 있는지 확인해 보겠습니다.
#
# 2. `pairplot` 읽는 방법과 특징
#
# 이 그래프는 행렬 형태의 격자로 구성되며, 위치에 따라 의미가 다릅니다.
#
# 대각선 (Diagonal): 자기 자신과의 관계이므로 보통 히스토그램이나 KDE(밀도 그래프)가 그려집니다. 
#   특정 변수의 데이터가 어디에 집중되어 있는지 보여줍니다.
#
# 비대각선 (Off-diagonal): 두 변수 사이의 산점도(Scatter Plot)입니다. 
#   예를 들어, 'total_bill' 행과 'tip' 열이 만나는 칸을 보면 두 변수 사이의 
#   상관관계를 알 수 있습니다.
# `corner=True`: `pairplot`은 상단과 하단이 대칭으로 중복된 정보를 보여주기 마련인데, 
#   이 옵션을 쓰면 하단 삼각형 부분만 남겨서 시각적으로 훨씬 깔끔해집니다.
#
# 3. 분석 인사이트 (무엇을 봐야 할까?)
#
# 양의 상관관계 발견: `total_bill`과 `tip`의 산점도를 보면 점들이 우상향하는 패턴을 보입니다. 
#   즉, "밥값이 비쌀수록 팁도 많이 준다"는 경향성을 시각적으로 즉시 확인할 수 있습니다.
#
# 데이터의 뭉침 현상: 인원수(`size`)는 정수(2명, 3명...)이기 때문에 산점도에서 일정한 
#   줄을 서 있는 모양으로 나타납니다.
#
# 그룹별 차이 (`hue="day"`): 요일별로 점의 분포가 어떻게 다른지 확인해 보세요. 
#   주말에 유독 높은 결제액과 팁이 몰려 있는지, 평일과 주말의 데이터 분포 모양이 
#   다른지 등을 한눈에 비교할 수 있습니다.

# 1. 데이터 로드
tips = sns.load_dataset("tips")

# 2. pairplot 시각화
# hue="day"를 설정하면 요일별로 색상을 나누어 분석할 수 있습니다.
g = sns.pairplot(
    data=tips, 
    hue="day",           # 색상 기준 (요일)
    palette="husl",      # 화려한 색상 팔레트
    corner=True,         # 중요: 대각선 기준 위쪽 중복 그래프를 제거 (깔끔함)
    diag_kind="kde",     # 대각선 방향에는 밀도 그래프(KDE) 표시
)

# 3. 제목 설정
g.figure.suptitle("Tips 데이터셋 변수 간 관계 분석 (Pair Plot)")
# 상단 여백을 강제로 만들어 제목이 잘리지 않게 합니다.
plt.subplots_adjust(top=0.90)

plt.show()
