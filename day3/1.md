# 시계열 데이터 전처리

시계열 데이터 전처리(Time Series Data Preprocessing)는 시간의 흐름에 따라 기록된 데이터를 분석이나 모델링에 적합한 상태로 가공하는 과정을 의미합니다.

일반적인 데이터와 달리 시계열 데이터는 **'시간의 순서(Order)'** 와 **'연속성(Continuity)'** 이 생명이기 때문에, 함부로 데이터를 섞거나 삭제해서는 안 된다는 특징이 있습니다.

---

## 1. 주요 전처리 단계와 방법

시계열 데이터는 보통 노이즈가 많거나 결측치가 존재하며, 시간 간격이 불규칙한 경우가 많습니다. 이를 해결하기 위해 다음과 같은 작업을 수행합니다.

### ① 결측치 처리 (Handling Missing Values)

데이터가 중간에 비어 있을 때, 단순히 평균값을 넣거나 삭제하면 흐름이 끊깁니다.

* **직전 값 채우기 (Forward Fill):** 마지막으로 관측된 값을 그대로 사용합니다.
* **선형 보간 (Linear Interpolation):** 비어 있는 값의 앞뒤를 직선으로 연결하여 중간값을 추정합니다.

### ② 데이터 리샘플링 (Resampling)

데이터의 빈도를 변경합니다.

* **Up-sampling:** 분 단위 데이터를 초 단위로 늘리기 (보간법 필요).
* **Down-sampling:** 초 단위 데이터를 시간/일 단위로 합치기 (평균, 합계 등 사용).

### ③ 데이터 정상성(Stationarity) 확보

시계열 분석에서 **'정상성(Stationarity)'** 을 확보해야 한다는 말은, 쉽게 표현하면 **"데이터의 성격이 과거와 미래에 일정하게 유지되는 상태"** 를 만들어야 한다는 뜻입니다

* **차분 (Differencing):** 현재 시점에서 이전 시점의 값을 빼서 추세(Trend)를 제거합니다.
* **로그 변환 (Log Transform):** 시간 흐름에 따라 분산이 커질 때 이를 안정화합니다.

### ④ 노이즈 제거 및 평활화 (Smoothing)

급격한 변동을 줄여 전체적인 흐름을 파악합니다.

* **이동 평균 (Moving Average):** 일정 구간의 평균을 구해 그래프를 부드럽게 만듭니다.

---

## 2. 파이썬(Pandas) 예제 코드(step1 폴더 참조)

가상의 기온 데이터를 만들어 결측치를 채우고 이동 평균을 구하는 예제입니다.

파일명 : main.py

```python
import pandas as pd
import numpy as np

# 1. 2026-01-01 부터 5일 간 날짜 배열을 생성한다
dates = pd.date_range('2026-01-01', periods=5, freq='D')
print(f"dates -> \n{dates}")

# 2. 결측치가 포함된 5일간의 기온 데이터 생성한다
temperature = {'temperature': [2.0, np.nan, 5.0, 4.0, 7.0]}
print(f"temperature -> \n{temperature}")

# 3. 데이터프레임을 생성한다 
df = pd.DataFrame(temperature, index=dates)
print(f"df -> \n{df}")

# 3. 전처리: 결측치 처리 (선형 보간법)
df['interpolated'] = df['temperature'].interpolate()
print(f"결측치 처리 후 df -> \n{df}")

# 4. 전처리: 이동 평균 (2일 기준)
df['moving_avg'] = df['interpolated'].rolling(window=2).mean()
print(f"이동 평균 처리 후 df -> \n{df}")


```

**결과 예시:**

| 날짜 | 원본 기온 | 보간 후 (Interpolated) | 이동 평균 (2일) |
| :--- | :--- | :--- | :--- |
| 2026-01-01 | 2.0 | 2.0 | NaN |
| 2026-01-02 | NaN | **3.5** | 2.75 |
| 2026-01-03 | 5.0 | 5.0 | 4.25 |
| 2026-01-04 | 4.0 | 4.0 | 4.50 |
| 2026-01-05 | 7.0 | 7.0 | 5.50 |

---

## 3. 요약: 왜 시계열 전처리를 하는가?

시계열 전처리의 최종 목적은 **"데이터를 모델이 학습하기 편하게 정돈하는 것"** 입니다. 지저분한 원본 데이터를 그대로 넣으면 모델은 계절성(Seasonality)이나 추세(Trend)를 읽지 못하고 노이즈에만 반응하게 됩니다.
